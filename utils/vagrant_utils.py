#! /usr/bin/env python3


import subprocess


def list_vms():
    p = subprocess.run("vagrant global-status", shell=True, stdout=subprocess.PIPE)
    cmd_result = p.stdout.decode('utf-8').split("\n")[2:-8]
    entries = [t.strip() for t in cmd_result if len(t.strip()) > 0]
    result = list()
    for e in entries:
        #id name provider status path
        e = e.split()
        result.append({
                "id":e[0].strip(),
                "name":e[1].strip(),
                "provider":e[2].strip(),
                "status":e[3].strip(),
                "path":e[4].strip()
                })
    return result

    

    


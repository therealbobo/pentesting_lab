#! /usr/bin/env python3

import sys
import os
import vagrant


class Host:
    def __init__(self, name, box_name):
        self.name = name
        self.box_name = box_name
        self.path = "./"+name

    def configure(self):
        os.mkdir(self.path, mode=0o755)
        os.chdir(self.path)
        self.v = vagrant.Vagrant()
        self.v.init(self.box_name)

    def up(self):
        for s in self.v.up(stream_output=True):
            print(s, end='')
        print(self.v.ssh(command="whoami"))
        self.v.halt()



#path = "./machine00"
#os.mkdir(path, mode=0o755)
#os.chdir(path)
#v = vagrant.Vagrant()
#v.init("generic/debian9")
#for s in v.up(stream_output=True):
#    print(s,end='')
#print(v.status())
#print(v.ssh(command="whoami"))
#v.halt()

v = Host(name="machine01", box_name="generic/debian9")
v.configure()
v.up()

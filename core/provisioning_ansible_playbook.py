#! /usr/bin/env python3

import yaml
import json
import sys
import io


class ProvisioningPlaybook(object):
    def __init__(self, packages):
        self.playbook = dict()
        self.playbook['hosts'] = 'all'
        self.playbook['become'] = 'yes'
        self.playbook['become_user'] = 'root'
        self.playbook['tasks'] = list()
        for p in packages:
            self.playbook['tasks'].append({'name':p,"package":{"name":p,"state":"present"}})
    
    def get_playbook(self):
        #need test due to starting ---
        json_data = json.dumps([self.playbook])
        yaml_data = yaml.dump(yaml.load(json_data), default_flow_style=False)
        return yaml_data


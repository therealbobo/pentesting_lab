#! /usr/bin/env python3

import ruamel.yaml
import sys
import io


class Playbook(object):
    def __init__(self, packages):
        self.hosts = 'all'
        self.become = 'yes'
        self.become_user = 'root'
        l = list()
        for p in packages:
            l.append({'name':p,"package":{"name":p,"state":"present"}})
        self.tasks = l

yaml = ruamel.yaml.YAML()
yaml.register_class(Playbook)
l = ['nmap','git','netdiscover','sqlmap']
stream = io.StringIO()
playbook = Playbook(l)
yaml.dump([playbook], stream)
playbook = stream.getvalue().split("\n")[1:]
playbook[0] = playbook[0].replace("  hosts","- hosts")
playbook = '\n'.join(playbook)
print(playbook)


